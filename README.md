Generic implementation of iterative greedy